@{
	Layout = "_LayoutCustomer";
}

<!-- Single Page Header start -->
@RenderSection("BreadCum", required: false)
<!-- Single Page Header End -->
<!-- Fruits Shop Start-->
<div class="container-fluid fruite py-5">
	<div class="container py-5">
		<h1 class="mb-4">Cửa hàng giày</h1>
		<div class="row g-4">
			<div class="col-lg-12">
				<!-- Search and Sort Bar -->
				<div class="row g-4 mb-4">
					<div class="col-xl-3">
						<form asp-controller="HangHoa" asp-action="Index" method="get">
							<div class="input-group w-100 mx-auto d-flex">
								<input type="search" name="search" class="form-control p-3" placeholder="Tìm kiếm..." aria-describedby="search-icon-1">
								<button type="submit" id="search-icon-1" class="input-group-text p-3">
									<i class="fa fa-search"></i>
								</button>
							</div>
						</form>
					</div>
					<div class="col-6"></div>
					<div class="col-xl-3">
						<div class="bg-light ps-3 py-3 rounded d-flex justify-content-between">
							<label for="sortSelect">Sắp xếp:</label>
							<select id="sortSelect" name="sort" class="border-0 form-select-sm bg-light me-3">
								<option value="">Mặc định</option>
								<option value="?sort=name-asc">Tên A-Z</option>
								<option value="?sort=name-desc">Tên Z-A</option>
								<option value="?sort=price-asc">Giá tăng dần</option>
								<option value="?sort=price-desc">Giá giảm dần</option>
							</select>
						</div>
					</div>
				</div>

				<div class="row g-4">
					<!-- Sidebar Left -->
					<div class="col-lg-3">
						<div class="row g-4">
							<!-- Menu Loại Component -->
							@await Component.InvokeAsync("MenuLoai")

							<!-- Price Filter -->
							<div class="col-lg-12">
								<div class="mb-3">
									<h4 class="mb-2">Lọc theo giá</h4>
									<input type="range" class="form-range w-100" id="rangeInput" name="rangeInput" min="0" max="50000000" value="0" step="100000">
									<div class="mt-2">
										<output id="amount" name="amount" for="rangeInput">0</output> VNĐ
									</div>
								</div>
							</div>

							<!-- Additional Filters -->
							<div class="col-lg-12">
								<div class="mb-3">
									<h4>Bộ lọc</h4>
									<div class="mb-2">
										<input type="radio" class="me-2" id="filter-1" name="filter" value="new">
										<label for="filter-1">Hàng mới</label>
									</div>
									<div class="mb-2">
										<input type="radio" class="me-2" id="filter-2" name="filter" value="bestseller">
										<label for="filter-2">Bán chạy</label>
									</div>
									<div class="mb-2">
										<input type="radio" class="me-2" id="filter-3" name="filter" value="sale">
										<label for="filter-3">Giảm giá</label>
									</div>
									<div class="mb-2">
										<input type="radio" class="me-2" id="filter-4" name="filter" value="discount">
										<label for="filter-4">Khuyến mãi</label>
									</div>
								</div>
							</div>

							<!-- Featured Products - SẼ NHẬN DATA TỪ VIEW -->
							<div class="col-lg-12">
								<h4 class="mb-3">Sản phẩm nổi bật</h4>
								@RenderSection("FeaturedProducts", required: false)
								<div class="d-flex justify-content-center my-4">
									<a asp-controller="HangHoa" asp-action="Index" class="btn border border-secondary px-4 py-3 rounded-pill text-primary w-100">
										Xem thêm
									</a>
								</div>
							</div>

							<!-- Banner -->
							<div class="col-lg-12">
								<div class="position-relative">
									<img src="~/img/banner-fruits.jpg" class="img-fluid w-100 rounded" alt="Banner" onerror="this.style.display='none'">
									<div class="position-absolute" style="top: 50%; right: 10px; transform: translateY(-50%);">
										<h3 class="text-secondary fw-bold">Fresh <br> Shoes <br> Store</h3>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Main Content - Product Grid -->
					<div class="col-lg-9">
						<div class="row g-4 justify-content-start">
							@RenderBody()
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- Fruits Shop End-->
@section Scripts {
	<script>
		// Auto-submit form when sort changed
		document.getElementById('sortSelect')?.addEventListener('change', function() {
			if(this.value) {
				window.location.href = this.value;
			}
		});

		// Price range filter with Vietnamese format
		const rangeInput = document.getElementById('rangeInput');
		const amountOutput = document.getElementById('amount');

		if (rangeInput && amountOutput) {
			rangeInput.addEventListener('input', function() {
				amountOutput.textContent = new Intl.NumberFormat('vi-VN').format(this.value);
			});
		}
	</script>
}